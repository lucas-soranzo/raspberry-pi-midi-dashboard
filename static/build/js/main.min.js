!function(e){e.fn.midiCommand=function(t){console.log(this);let o={byte1:204,byte2:0,byte3:0,name:"New Command",icon:null,color:"light",size:"lg",style:"outline"};Object.assign(o,t),this.addClass(["btn",`btn${o.style&&"Solid"!=o.style?"-"+o.style.toLocaleLowerCase():""}-${o.color.toLocaleLowerCase()}`,`btn${o.size?"-"+o.size.toLocaleLowerCase():""}`,"mr-3"].join(" "));let s=o.name;return o.icon&&(s=`<i class="fas fa-${o.icon.toLocaleLowerCase()}"></i>${s}`),this.html(s),this.appendTo("#commandContainer"),this.on("click",t=>{this.trigger("blur"),e.ajax({url:"/command",data:{status_byte:o.byte1,data_byte1:o.byte2,data_byte2:o.byte3},success:e=>getToast({text:Object.values(e).join(" ")})})}),this}}(jQuery);const Commands=new class{constructor(){this.stored=[],this.load()}createElement(e){return $("<button>").midiCommand(e)}push(e){this.stored.push(e),this.createElement(e),window.localStorage.setItem("commands",JSON.stringify(this.stored))}load(){const e=window.localStorage.getItem("commands");if(e)try{this.stored=JSON.parse(e),this.stored.map(e=>this.createElement(e))}catch(e){console.error(e)}}clear(){window.localStorage.removeItem("commands"),window.location.reload()}};$("#clearCommands").on("click",()=>Commands.clear()),$("#commandForm").on("submit",e=>{e.preventDefault();const t=new FormData(e.target),o=["name","icon","color","size","style","byte1","byte2","byte3"].reduce((e,o)=>(e[o]=t.get(o),e),{});Commands.push(o),$("#commandFormModal").modal("hide")});var curZoom=100;const updateZoom=e=>{curZoom+=20*e,window.localStorage.setItem("zoom",curZoom),$("body").css("zoom",` ${curZoom}%`)},storageZoom=window.localStorage.getItem("zoom");if(storageZoom)try{curZoom=parseInt(storageZoom)}catch(e){window.localStorage.removeItem("zoom")}function getToast(e){const t={title:"Pi Midi Dashboard",text:""};Object.assign(t,e),$(`\n        <div class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-delay="2000">\n            <div class="toast-header">\n                <img src="/static/favicon.png" class="rounded mr-2" alt="...">\n                <strong class="mr-auto">${t.title}</strong>\n                <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">\n                    <span aria-hidden="true">&times;</span>\n                </button>\n            </div>\n            <div class="toast-body">\n                ${t.text}\n            </div>\n        </div>`).appendTo("body").toast("show")}$("body").css("zoom",` ${curZoom}%`),$("#zoomIn").on("click",()=>updateZoom(1)),$("#zoomOut").on("click",()=>updateZoom(-1)),$("#requestFullScreen").on("click",()=>{var e=window.document,t=e.documentElement,o=t.requestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullScreen||t.msRequestFullscreen,s=e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen;e.fullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement||e.msFullscreenElement?s.call(e):o.call(t)});