!function(e){e.fn.midiCommand=function(o){console.log(this);let t={byte1:204,byte2:0,byte3:0,name:"New Command",icon:null,color:"light",size:"lg",style:"outline"};Object.assign(t,o),this.addClass(["btn",`btn${t.style&&"Solid"!=t.style?"-"+t.style.toLocaleLowerCase():""}-${t.color.toLocaleLowerCase()}`,`btn${t.size?"-"+t.size.toLocaleLowerCase():""}`,"mr-3"].join(" "));let l=t.name;return t.icon&&(l=`<i class="fas fa-${t.icon.toLocaleLowerCase()}"></i>${l}`),this.html(l),this.appendTo("#commandContainer"),this.on("click",o=>{this.trigger("blur"),e.ajax({url:"/command",data:{status_byte:t.byte1,data_byte1:t.byte2,data_byte2:t.byte3},success:console.log})}),this}}(jQuery);const Commands=new class{constructor(){this.stored=[],this.load()}createElement(e){return $("<button>").midiCommand(e)}push(e){this.stored.push(e),this.createElement(e),window.localStorage.setItem("commands",JSON.stringify(this.stored))}load(){const e=window.localStorage.getItem("commands");if(e)try{this.stored=JSON.parse(e),this.stored.map(e=>this.createElement(e))}catch(e){console.error(e)}}clear(){window.localStorage.removeItem("commands"),window.location.reload()}};$("#clearCommands").on("click",()=>Commands.clear()),$("#commandForm").on("submit",e=>{e.preventDefault();const o=new FormData(e.target),t=["name","icon","color","size","style","byte1","byte2","byte3"].reduce((e,t)=>(e[t]=o.get(t),e),{});Commands.push(t),$("#commandFormModal").modal("hide")});var curZoom=100;const updateZoom=e=>{curZoom+=20*e,window.localStorage.setItem("zoom",curZoom),$("body").css("zoom",` ${curZoom}%`)},storageZoom=window.localStorage.getItem("zoom");if(storageZoom)try{curZoom=parseInt(storageZoom)}catch(e){window.localStorage.removeItem("zoom")}$("body").css("zoom",` ${curZoom}%`),$("#zoomIn").on("click",()=>updateZoom(1)),$("#zoomOut").on("click",()=>updateZoom(-1)),$("#requestFullScreen").on("click",()=>{var e=window.document,o=e.documentElement,t=o.requestFullscreen||o.mozRequestFullScreen||o.webkitRequestFullScreen||o.msRequestFullscreen,l=e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen;e.fullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement||e.msFullscreenElement?l.call(e):t.call(o)});